# JWT デコード

import jwt
import requests

# Cognito の公開鍵を取得
keys_url = "https://ap-northeast-1ico7en9y0.auth.ap-northeast-1.amazoncognito.com/ap-northeast-1_iCO7en9Y0.well-known/jwks.json"
keys = requests.get(keys_url).json()

# アクセストークンを検証
token = "eyJraWQiOiI1dFJSWEZkRGJENEVSRjYrVzZDdkM5NHN4ZnRKSGpnb3hpMkk5ZGlZZGJBPSIsImFsZyI6IlJTMjU2In0.eyJzdWIiOiIyN2E0N2EzOC0xMGIxLTcwZTItYTI1Zi0zYWFhNmJhNDA4MzMiLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuYXAtbm9ydGhlYXN0LTEuYW1hem9uYXdzLmNvbVwvYXAtbm9ydGhlYXN0LTFfaUNPN2VuOVkwIiwidmVyc2lvbiI6MiwiY2xpZW50X2lkIjoiNW02Njlyb2YwbjBta3BoMTVuM2ZoM3Y0cGUiLCJvcmlnaW5fanRpIjoiZDI3YTY3ZTctM2RmNi00NDg1LWE2MWQtNjM5YWFjNjlmZDNiIiwidG9rZW5fdXNlIjoiYWNjZXNzIiwic2NvcGUiOiJwaG9uZSBvcGVuaWQgZW1haWwiLCJhdXRoX3RpbWUiOjE3NDI5NzMyMjAsImV4cCI6MTc0Mjk3NjgyMCwiaWF0IjoxNzQyOTczMjIwLCJqdGkiOiI3ZDJjODEzOC1hNWI3LTQ2YzEtYTk2ZC1kYTgyNzE3ZWU0NzYiLCJ1c2VybmFtZSI6InRlc3QtdXNlcjIifQ.OWznuh10kP0IHbY3t80mrTOSbMJ0DSgQ4ZQTKrOM47ynv35XeBBhjUHzN-_18f5iDb7CpRQOpQrB4Gy8IGM1UxjouemXvQTgrXGSVP09ENK-vRLs-bTpIqaRfBW-9yK2IX7kjD1RUH9kYpqVxXQdj8O4esua-npPdxeoZ33lc6_vjXpCObG0sZfI2CK2iKpeiHMMR2YGwsD103ILU7t6BobUVtSJ_BC_p34uQFE0kBOsgBtaWFgol1wAYm49H2_g7JKUtO7Gxif9qqO1tOH-0GJQkKeKBYCwIqVDnpBov_xT7dNeZ2xct5uypgcpdXCgUZu2dzr3GigWoWNkkWta2g"
decoded_token = jwt.decode(token, keys, algorithms=["RS256"], audience="5m669rof0n0mkph15n3fh3v4pe")

print(decoded_token)
