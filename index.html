<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON POST送信</title>
</head>
<body>
    <h2>JSONデータを送信</h2>
    <button id="sendData">送信</button>

    <script>
        document.getElementById('sendData').addEventListener('click', () => {
            const url ='https://doyv3lk5tj.execute-api.ap-northeast-1.amazonaws.com/lambda_function_API';
            const token = "eyJraWQiOiI4dDVvcEc0UVdRaERLZUN4cFwvMlh0Y1M2b2dUOHdvNDdFS0hBdWN3Wm0rND0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyN2E0N2EzOC0xMGIxLTcwZTItYTI1Zi0zYWFhNmJhNDA4MzMiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLW5vcnRoZWFzdC0xLmFtYXpvbmF3cy5jb21cL2FwLW5vcnRoZWFzdC0xX2lDTzdlbjlZMCIsImNvZ25pdG86dXNlcm5hbWUiOiJ0ZXN0LXVzZXIyIiwib3JpZ2luX2p0aSI6IjFjMzFmMmFmLWY2ZmYtNGQxYS05MmUzLTA1MzAzZjI2NTVmOSIsImF1ZCI6IjVtNjY5cm9mMG4wbWtwaDE1bjNmaDN2NHBlIiwiZXZlbnRfaWQiOiI5ZTM4NzliZC1lNjNiLTQwMDgtODcxYS01YmRhYTJlMjVmNDkiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTc0MzEyNzkxNCwiZXhwIjoxNzQzMTMxNTE0LCJpYXQiOjE3NDMxMjc5MTQsImp0aSI6Ijc4Yzc3OTdiLTU1YzEtNDc4Zi1hYjBlLWJmZTRkMjcxNjE2MCIsImVtYWlsIjoiay50c3VrdWRhQGFuZC1leC5jby5qcCJ9.OtxIyUr1RciVCCY2DmwwD905MZVExOMg6VpjbdFELEqTf-rtzyaxqnWJ3qP7_puJj4Z0wBJHi_BCQmzy78R6kZ1GQkOLat-EtyFmyK1sZ0LoV6UfGsls6NCgqXLcnx_24lvaGV3jdMQfcOBZTbLiehkjtrtrFBph1-D-ERI5xwiocSsty2N--F5krE7rJuHRjrgvtV38CIdak2NLE28gy1bLVVBeNpXoZQzgW2msthNA_mz92OYZEjlXoPh472nXLMSusp8rJ_SRiA-VleA7fViCRJxBVYygEzPD47ciH-5gPTzVyZGxgYjYJmceP7-iYsQezQtYK1gHdso-uSnOAg";

            // 送信するJSONデータ
            const json_data = {
                "operation": "POST",
                "data": {
                    "en": "Hello",
                    "jp": "こんにちは"
                }
            };

            // `fetch` を使ってPOSTリクエストを送信
            try {
                    fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${token}`
                        },
                        body: JSON.stringify(json_data)
                    })
                    .then(response => response.json())
                    .then(data => console.log("Success:", data))
                    .catch(error => console.error("Error:", error));
                
                // CORS対策
                return {
                        statusCode: 200,
                        headers: {
                            "Access-Control-Allow-Origin": "*",
                            "Access-Control-Allow-Methods": "POST, GET, OPTIONS",
                            "Access-Control-Allow-Headers": "Content-Type, Authorization"                            
                        },
                        body: JSON.stringify({ message: "Request received" })
                    };

                if(!response.ok) {
                    throw new Error('HTTP error! Status: ${response.status}');
                }

                const result = response.json();
                console.log('Success:', result);
            } catch(error) {
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>
