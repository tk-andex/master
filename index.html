<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON POST送信</title>
</head>
<body>
    <h2>JSONデータを送信</h2>
    <button id="sendData">送信</button>

    <script>
        document.getElementById('sendData').addEventListener('click', () => {
            const url ='https://doyv3lk5tj.execute-api.ap-northeast-1.amazonaws.com/lambda_function_API';
            const token = "Bearer eyJraWQiOiI4dDVvcEc0UVdRaERLZUN4cFwvMlh0Y1M2b2dUOHdvNDdFS0hBdWN3Wm0rND0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIyN2E0N2EzOC0xMGIxLTcwZTItYTI1Zi0zYWFhNmJhNDA4MzMiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLmFwLW5vcnRoZWFzdC0xLmFtYXpvbmF3cy5jb21cL2FwLW5vcnRoZWFzdC0xX2lDTzdlbjlZMCIsImNvZ25pdG86dXNlcm5hbWUiOiJ0ZXN0LXVzZXIyIiwib3JpZ2luX2p0aSI6ImVhOTA5ZTk0LTI5OWMtNDRhZi04OTIxLWU1MTQ1ZjlhMDczYyIsImF1ZCI6IjVtNjY5cm9mMG4wbWtwaDE1bjNmaDN2NHBlIiwiZXZlbnRfaWQiOiJhMzM1ODRjZC00NWE4LTRiZTEtYmNlZC1lYzc3YjYxZWU1NmMiLCJ0b2tlbl91c2UiOiJpZCIsImF1dGhfdGltZSI6MTc0MzEzNjEyMywiZXhwIjoxNzQzMTM5NzIzLCJpYXQiOjE3NDMxMzYxMjMsImp0aSI6IjU3NTJlZjdlLTI2ODctNDU3OS05MzY3LWIxYzJiZTg2ZDVmNyIsImVtYWlsIjoiay50c3VrdWRhQGFuZC1leC5jby5qcCJ9.NOvrhX1gIlUvYp1on7KNYiUMO8wXYJondrccLXjB2Hw4p0VitLNE9_5l0YCORCaOYp3nn560E83dkDbX0HutRTB5Jz5rWtyGpdD32Rfo4yXp3JYIKAG9AfLvspbFQeDCPTG_cVSNrLRH1EPdt7C60DesE7P8UYDvcpCGUVP8aI3Aw6CXrCmV0syPLIGS2PNc1n0jClbWxKzsXOkkI9ETjGvnxYE1E1c5MS32lz_yMzKN5ntUgX7TfAinFpPAx2Sj47GcnVw_R69Q-MG_BFeEu5zjFDJ4mFrzXxs-RjAhzSWJxXRS2d3g57jj4QiJgI2r2f4H-p9jVM0ca4QXobITZg";

            // 送信するJSONデータ
            const json_data = {
                "operation": "POST",
                "data": {
                    "en": "Hello",
                    "jp": "こんにちは"
                }
            };

            // `fetch` を使ってPOSTリクエストを送信
            try {
                    fetch(url, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": `Bearer ${token}`
                        },
                        body: JSON.stringify(json_data)
                    })
                    .then(response => response.json())
                    .then(data => console.log("Success:", data))
                    .catch(error => console.error("Error:", error));
                
                // CORS対策
                return {
                        statusCode: 200,
                        headers: {
                            "Access-Control-Allow-Origin": "*",
                            "Access-Control-Allow-Methods": "POST, GET, OPTIONS",
                            "Access-Control-Allow-Headers": "Content-Type, Authorization"                    
                        },
                        body: JSON.stringify({ message: "Request received" })
                    };

                if(!response.ok) {
                    throw new Error('HTTP error! Status: ${response.status}');
                }

                const result = response.json();
                console.log('Success:', result);
            } catch(error) {
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>
